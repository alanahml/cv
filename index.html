<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>alanah lam</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        @font-face {
            font-family: 'Neue Haas Grotesk Display Pro';
            src: url('./assets/NeueHaasDisplayLight.ttf');
            font-weight: 300;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: #f9f9f9;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            font-family: 'Neue Haas Grotesk Display Pro', sans-serif;
            font-weight: 300;
            font-style: normal;
        }

        .portfolio {
            position: relative;
            width: 100%;
            height: 100%;
        }

        /* ── top bar ── */
        .pf-name {
            position: absolute;
            left: 22px;
            top: 17px;
            font-size: 14px;
            color: #71717a;
            letter-spacing: 0.84px;
            line-height: normal;
        }

        .pf-tagline {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 13px;
            font-size: 0.8em;
            color: #71717a;
            letter-spacing: 0.84px;
            white-space: nowrap;
            line-height: normal;
        }

        .pf-clock {
            position: absolute;
            right: 22px;
            top: 17px;
            font-size: 0.8em;
            color: #71717a;
            letter-spacing: 0.84px;
            white-space: nowrap;
            line-height: normal;
        }

        /* ── central media ── */
        .pf-media {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 500px;
            height: 310px;
            overflow: hidden;
        }

        .pf-media img,
        .pf-media video {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            max-width: none;
            pointer-events: none;
        }

        /* ── left: lately ── */
        .pf-lately {
            position: absolute;
            left: 23px;
            top: 50%;
            transform: translateY(-50%);
            width: 287px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .pf-lately-label {
            font-size: 0.8em;
            color: #71717a;
            letter-spacing: 0.84px;
        }

        .pf-lately-list {
            display: flex;
            flex-direction: column;
            gap: 0.25em;
            font-size: 0.8em;
            color: #000;
        }

        /* ── corner numbers ── */
        .pf-num {
            position: absolute;
            font-size: 0.8em;
            color: #000;
        }
        .pf-num:hover {
            text-shadow: rgb(4, 255, 109);
            font-weight: 700;
        }

        /* Positioned relative to viewport center, matching Figma 1280×800 canvas */
        .pf-n1 { left: calc(50% - 266.68px); top: calc(50% - 200px);}
        .pf-n2 { left: calc(50% + 261.45px); top: calc(50% - 200px); }
        .pf-n3 { left: calc(50% - 268.18px); top: calc(50% + 180px); }
        .pf-n4 { left: calc(50% + 261.45px); top: calc(50% + 180px); }

        /* ── tagline scramble ── */
        .pf-tagline .sc { display: inline-block; }

        /* ── cursor decoration ── */
        .pf-cursor {
            position: fixed;
            left: 0;
            top: 0;
            width: 50px;
            height: 40px;
            filter: blur(4px);
            pointer-events: none;
            transform: translate(-50px, -50px);
            transition: transform 8000ms cubic-bezier(0.01, 0, 1, 1);
        }

        .pf-cursor img { width: 100%; height: 100%; object-fit: cover; }

        /* ── thumbnail photos ── */
        .pf-thumb {
            position: absolute;
            right: 111px;
            width: 3em;
            height: 3em;
        }

        .pf-thumb1 { top: 471px; }
        .pf-thumb2 { top: 526px; }

        .pf-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* ── project media sources (hidden, used as data store) ── */
        .pf-projects { display: none; }

        /* ── project link (inline beside corner number) ── */
        .pf-num a {
            position: absolute;
            top: 0;
            left: calc(100% + 8px);
            white-space: nowrap;
            color: rgb(6, 88, 73);
            font-size: inherit;
            letter-spacing: inherit;
            text-decoration: none;
            opacity: 0;
            pointer-events: none;
            transition: opacity 150ms ease, background-color 300ms ease-in-out, color 300ms ease-in-out, filter 300ms ease-in-out, letter-spacing 300ms ease-in-out;
        }

        .pf-n2 a, .pf-n4 a {
            left: auto;
            right: calc(100% + 8px);
        }

        .pf-num:hover a {
            opacity: 1;
            pointer-events: auto;
        }

        .pf-num a:hover {
            background-color: blue;
            color: rgb(255, 255, 255);
            filter: blur(0.05em);
            letter-spacing: 0.05em;
            text-decoration: dotted;
            text-wrap: nowrap;
        }

        /* Bridge the gap between the number and the link so hover doesn't flicker */
        .pf-num::after {
            content: '';
            position: absolute;
            top: -4px;
            bottom: -4px;
            left: -4px;
            right: -20px;
        }

        .pf-n2::after, .pf-n4::after {
            right: -4px;
            left: -20px;
        }

        /* Mobile: tap to reveal */
        .pf-num.pf-touch-active a {
            opacity: 1;
            pointer-events: auto;
        }

        /* ── ascii rain overlay ── */
        #ascii-rain {
            position: fixed;
            inset: 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.25;
            color: rgba(113, 113, 122, 0.4);
            pointer-events: none;
            z-index: 2;
            overflow: hidden;
            white-space: pre;
            display: none;
        }

        /* ── ascii cat widget ── */
        #ascii-cat {
            position: fixed;
            bottom: 0px;
            right: 100px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.3;
            color: #71717a;
            pointer-events: none;
            z-index: 10;
            white-space: pre;
            display: none;
        }

        /* ── plants ── */
        .pf-plants {
            position: absolute;
            right: 11px;
            bottom: 0px;
            width: 88px;
            height: auto;
            pointer-events: none;
        }

        .pf-plants img { width: 100%; height: 100%; display: block; }
    </style>
</head>
<body>
    <div class="portfolio">

        <!-- top bar -->
        <p class="pf-name">alanah 林</p>
        <p class="pf-tagline">this is a living archive</p>
        <p class="pf-clock" id="pf-clock"></p>

        <!-- central media -->
        <div class="pf-media">
            <img src="assets/fpsite.webp" alt="" />
        </div>
        <span style="color:rgb(172, 172, 172); position: absolute; left: 50%; top: 20%; transform: translate(-50%, -80%);">+</span>
         <span style="color:rgb(172, 172, 172); position: absolute; left: 50%; top: 80%; transform: translate(-50%, -20%);">+</span>


        <!-- left: lately -->
        <div class="pf-lately">
            <p class="pf-lately-label">lately (2026)</p>
            <div class="pf-lately-list">
                <a href="https://checkpoint.pictures">a print media network</a>
                <a href="https://per.ma">a photo app where only humans can post</a>
                <a href="https://highlysensitive.xyz">an upcycled textile practice</a>
                <a href="https://twitch.tv/letstouchbase">a return to the office</a>
            </div>
        </div>

        <!-- corner numbers -->
        <p class="pf-num pf-n1" data-num="1">1<a href="https://fp.inc" target="_blank" rel="noopener">web design for future primitive</a></p>
        <p class="pf-num pf-n2" data-num="2">2<a href="https://checkpoint.pictures" target="_blank" rel="noopener">ux + brand for a photo booth</a></p>
        <p class="pf-num pf-n3" data-num="3">3<a href="https://tokenbound.org" target="_blank" rel="noopener">ux + brand for a blockchain protocol</a></p>
        <p class="pf-num pf-n4" data-num="4">4<a href="https://byseanbrown.com" target="_blank" rel="noopener">web design for Sean Brown's portfolio</a></p>

        <!-- project media sources -->
        <div class="pf-projects">
            <div class="pf-project" data-num="1" data-url="https://fp.inc" data-label="future primitive">
                <img src="assets/fpsite.webp" />
            </div>
            <div class="pf-project" data-num="2" data-url="https://checkpoint.pictures" data-label="checkpoint">
                <img src="assets/checkpoint.webp" />
            </div>
            <div class="pf-project" data-num="3" data-url="https://tokenbound.org" data-label="tokenbound.org">
                <img src="assets/tokenbound.webp" />
            </div>
            <div class="pf-project" data-num="4" data-url="https://byseanbrown.com" data-label="byseanbrown.com">
                <img src="assets/byseanbrown.webp" />
            </div>
        </div>

        <!-- cursor decoration -->
        <div class="pf-cursor">
            <img src="assets/butterfly.gif" alt="butterfly cursor" />
        </div>

        <!-- thumbnail photos -->
        <div class="pf-thumb pf-thumb1">
            <img src="assets/field480.webp" alt="field.tox" />
        </div>
        <div class="pf-thumb pf-thumb2">
            <img src="/assets/beepixel480.webp" alt="pixel-threshold.tox" />
        </div>

        <!-- plants -->
        <div class="pf-plants">
            <img src="assets/plants.svg" alt="" />
        </div>
       

    </div>

     <img src="assets/cc-head.svg" alt="cc head" style="position: absolute; right: 0px; bottom: 0px; z-index: -99; width: 20vw; height: auto; pointer-events: none;" />

    <pre id="ascii-rain"></pre>
    <pre id="ascii-cat"></pre>

    <script>
        function updateClock() {
            const d = new Date();
            const days   = ['Su','Mo','Tu','We','Th','Fr','Sa'];
            const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            let h = d.getHours();
            const m    = String(d.getMinutes()).padStart(2, '0');
            const ampm = h >= 12 ? 'pm' : 'am';
            h = h % 12 || 12;
            document.getElementById('pf-clock').textContent =
                `${days[d.getDay()]} ${h}:${m} ${ampm} ${months[d.getMonth()]} ${d.getDate()}  ${d.getFullYear()}`;
        }
        updateClock();
        setInterval(updateClock, 1000);

        // ── cursor follower ───────────────────────────────────────────
        const pfCursor = document.querySelector('.pf-cursor');
        const pfCursorImg = pfCursor.querySelector('img');

        // canvas used to freeze the gif on a single frame once settled
        const snapCanvas = document.createElement('canvas');
        snapCanvas.width = 50; snapCanvas.height = 40;
        snapCanvas.style.cssText = 'position:absolute;inset:0;width:100%;height:100%;display:none;';
        pfCursor.appendChild(snapCanvas);

        function freezeGif() {
            snapCanvas.getContext('2d').drawImage(pfCursorImg, 0, 0, 50, 40);
            pfCursorImg.style.display = 'none';
            snapCanvas.style.display = 'block';
        }
        function thawGif() {
            snapCanvas.style.display = 'none';
            pfCursorImg.style.display = '';
        }

        pfCursor.addEventListener('transitionend', freezeGif);

        let lastX = null, facingLeft = false;
        document.addEventListener('mousemove', e => {
            thawGif();
            if (lastX !== null && e.clientX !== lastX) {
                facingLeft = e.clientX < lastX;
            }
            lastX = e.clientX;
            const sx = facingLeft ? -1 : 1;
            pfCursor.style.transform = `translate(${e.clientX - 25}px, ${e.clientY - 20}px) scaleX(${sx})`;
        });

        // ── pf-num hover → swap pf-media image ───────────────────────
        const pfMediaImg = document.querySelector('.pf-media img');
        const defaultSrc = pfMediaImg.src;

        function activateNum(num) {
            const project = document.querySelector(`.pf-project[data-num="${num.dataset.num}"]`);
            const img = project && project.querySelector('img');
            if (img) pfMediaImg.src = img.src;
        }

        function deactivateAll() {
            document.querySelectorAll('.pf-num').forEach(n => n.classList.remove('pf-touch-active'));
            pfMediaImg.src = defaultSrc;
        }

        document.querySelectorAll('.pf-num').forEach(num => {
            // Desktop hover
            num.addEventListener('mouseenter', () => activateNum(num));
            num.addEventListener('mouseleave', () => { pfMediaImg.src = defaultSrc; });

            // Mobile: first tap reveals link, tap on link navigates
            num.addEventListener('touchstart', e => {
                if (e.target.closest('a')) return; // let the link handle its own tap
                e.preventDefault();
                const wasActive = num.classList.contains('pf-touch-active');
                deactivateAll();
                if (!wasActive) {
                    num.classList.add('pf-touch-active');
                    activateNum(num);
                }
            }, { passive: false });
        });

        // Tap outside any pf-num dismisses revealed link
        document.addEventListener('touchstart', e => {
            if (!e.target.closest('.pf-num')) deactivateAll();
        }, { passive: true });

        // ── tagline scramble ──────────────────────────────────────────
        (function () {
            const GEO = '林°❀⋆.ೃ࿔*:･⬡✧';
            const el  = document.querySelector('.pf-tagline');
            const ORIGINAL = el.textContent;

            function randGeo() {
                return GEO[Math.floor(Math.random() * GEO.length)];
            }

            function scramble() {
                const FADE_OUT = 300;
                const FADE_IN  = 800;

                // Phase 1 – all glyphs visible immediately
                el.innerHTML = [...ORIGINAL].map(ch =>
                    `<span class="sc">${ch === ' ' ? '\u00a0' : randGeo()}</span>`
                ).join('');

                const spans = [...el.querySelectorAll('span.sc')];

                // Phase 2 – staggered crossfade in random order
                const order = spans
                    .map((_, i) => i)
                    .filter(i => ORIGINAL[i] !== ' ')
                    .sort(() => Math.random() - 0.5);

                order.forEach((i, step) => {
                    const span = spans[i];
                    setTimeout(() => {
                        span.style.transition = `opacity ${FADE_OUT}ms ease`;
                        span.style.opacity = '0';
                        setTimeout(() => {
                            span.textContent = ORIGINAL[i];
                            span.style.transition = `opacity ${FADE_IN}ms cubic-bezier(0.25, 0, 0.5, 1)`;
                            span.style.opacity = '1';
                            if (step === order.length - 1) {
                                setTimeout(() => { el.textContent = ORIGINAL; }, FADE_IN + 100);
                            }
                        }, FADE_OUT);
                    }, step * 80);
                });
            }
            scramble();
            setInterval(scramble, 8 * 60 * 1000);
        })();
    </script>

    <script>
    // ── ascii rain & weather ──────────────────────────────────────
    (function () {
        // Two-frame cat animation: eyes open / blink
        var CAT = [
            // frame 0 — eyes open
            [   '     __,___        __,___    ',
                '    ///|\\ \\       ///|\\ \\',
                '   ^^^^| ^^^      ^^^^^|^^   ',
                '       |∧_∧         ∧_∧|     ',
                '       | o.o)     (._. |     ',
                '       と   )      (  つ0     ',
                '        し-J        し-J      ',
            ].join('\n'),
            // frame 1 — blink
            [   '     __,___        __,___    ',
                '    ///|\\ \\       ///|\\ \\',
                '   ^^^^| ^^^      ^^^^^|^^   ',
                '       |∧_∧         ∧_∧|     ',
                '       | -.-)     (-_- |     ',
                '       と   )      (  つ0     ',
                '        し-J        し-J      ',
            ].join('\n'),
        ];

        var rainEl = document.getElementById('ascii-rain');
        var catEl  = document.getElementById('ascii-cat');

        // Rain characters — mostly diagonal slash for angled rain
        var RAIN_CHARS = ['/', '/', '/', '/', '|', "'", '.', '.', '.', '.', ' '];

        var cols = 0, rows = 0, grid = [], drops = [];
        var raf = null, active = false, tickCount = 0;
        var lastTs = 0;

        function initGrid() {
            var CW = 7.8, CH = 16.25; // approx px per char at 13px monospace
            cols = Math.ceil(window.innerWidth  / CW) + 2;
            rows = Math.ceil(window.innerHeight / CH) + 2;
            grid = [];
            for (var r = 0; r < rows; r++) {
                grid.push(new Array(cols).fill(' '));
            }
            var nDrops = Math.ceil(cols * 0.22);
            drops = [];
            for (var i = 0; i < nDrops; i++) {
                drops.push({
                    c: Math.floor(Math.random() * cols),
                    r: Math.random() * -rows,
                    v: 0.12 + Math.random() * 0.22,
                });
            }
        }

        function animFrame(ts) {
            if (ts - lastTs >= 80) { // ~12 fps
                lastTs = ts;
                tickCount++;

                // Decay existing chars
                for (var r = 0; r < rows; r++) {
                    for (var c = 0; c < cols; c++) {
                        if (grid[r][c] !== ' ' && Math.random() < 0.13) {
                            grid[r][c] = ' ';
                        }
                    }
                }

                // Advance drops
                for (var i = 0; i < drops.length; i++) {
                    var d = drops[i];
                    d.r += d.v;
                    var ri = Math.floor(d.r);
                    if (ri >= 0 && ri < rows) {
                        grid[ri][d.c] = RAIN_CHARS[Math.floor(Math.random() * RAIN_CHARS.length)];
                    }
                    if (d.r > rows) {
                        d.c = Math.floor(Math.random() * cols);
                        d.r = -4 - Math.random() * 20;
                        d.v = 0.12 + Math.random() * 0.22;
                    }
                }

                rainEl.textContent = grid.map(function (row) { return row.join(''); }).join('\n');

                // Cat blink: briefly show closed eyes every ~40 ticks (~7s)
                if (tickCount % 100 === 0) {
                    catEl.textContent = CAT[1];
                    setTimeout(function () { if (active) catEl.textContent = CAT[0]; }, 140);
                }
            }
            raf = requestAnimationFrame(animFrame);
        }

        function startRain() {
            if (active) return;
            active = true;
            initGrid();
            rainEl.style.display = 'block';
            catEl.style.display  = 'block';
            catEl.textContent    = CAT[0];
            raf = requestAnimationFrame(animFrame);
        }

        function stopRain() {
            if (!active) return;
            active = false;
            cancelAnimationFrame(raf);
            rainEl.style.display = 'none';
            catEl.style.display  = 'none';
        }

        async function checkRaining() {
            try {
                // wttr.in detects location from IP — no permission prompt needed
                var resp = await fetch('https://wttr.in/?format=j1');
                if (!resp.ok) return false;
                var data = await resp.json();
                var cond = data.current_condition && data.current_condition[0];
                if (!cond) return false;
                var precip = parseFloat(cond.precipMM) || 0;
                var code   = parseInt(cond.weatherCode) || 0;
                // wttr.in rain/drizzle/shower codes
                var rainCodes = [263,266,293,296,299,302,305,308,311,314,353,356,359,362,365,374,377];
                return precip > 0 || rainCodes.indexOf(code) !== -1;
            } catch (e) {
                return false;
            }
        }

        // Initial check on load — ?rain param forces it on for preview
        if (new URLSearchParams(location.search).has('rain')) {
            startRain();
        } else {
            checkRaining().then(function (rain) { if (rain) startRain(); });
        }

        // Re-check every 15 minutes
        setInterval(async function () {
            var rain = await checkRaining();
            rain ? startRain() : stopRain();
        }, 15 * 60 * 1000);

        window.addEventListener('resize', function () {
            if (active) initGrid();
        });
    })();
    </script>
</body>
</html>
